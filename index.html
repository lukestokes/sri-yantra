<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Sri Yantra Meditation</title>
  <meta name="description" content="Sri Yantra Meditation">
  <meta name="author" content="Luke Stokes">

<!--  <link rel="stylesheet" href="css/styles.css?v=1.0"> -->

<style>
html, body, #wrapper {
   height:100%;
   width: 100%;
   margin: 0;
   padding: 0;
   border: 0;
}
#wrapper td {
   vertical-align: middle;
   text-align: center;
}
img[usemap], map area{
    outline: none;
}
div#display_container {
    margin: 40px 0px 0px 80px;
    left: 0;
    top: 0;
    z-index: 10;
    position: absolute;
}
div#description {
    font-size: 30px;
}
div#level {
    font-size: 16px;
}
#return_menu {
    z-index: 10;
    position: absolute;
    left: 0;
    top: 0;
}

div#main_wrapper {
    display: none;
}

</style>

<link rel="icon" href="favicon.ico" type="image/x-icon" />

</head>
<body>
<div id="menu">
    <p>Welcome to the Sri Yantra educational and meditation tool. Use this tool to learn about the different aspects of the Sri Yantra and as a mechanism for focusing on it. The Sri Yantra represents the union of Masculine and Feminine Divine while including all aspects of human experience.</p>

    <p>
        <ul>
            <li><a href="#" id="explore_sri_yantra">Explore the Sri Yantra</a></li>
            <li><a href="#" id="learn_sri_yantra">Learn the Sri Yantra</a></li>
            <li><a href="#" id="begin_meditation">Begin Meditation</a></li>
        </ul>
    </p>
</div>

<div id="main_wrapper">
    <a href="#" id="return_menu">Return</a>
    <div id="display_container">
        <div id="level"></div>
        <div id="description"></div>
        <div id="log"></div>
    </div>
    <table id="wrapper">
      <tr>
        <td><img src="images/sri_yantra_white.png" alt="" id="main" usemap="#image-map"/></td>
      </tr>
    </table>
</div>

<map name="image-map" id="my-map">
    <area href="sri_yantra_1_power_to_overcome_worldy_desire.png" coords="623,87,372,18" shape="rect">
    <area href="sri_yantra_2_power_to_overcome_anger.png" coords="84,629,14,373" shape="rect">
    <area href="sri_yantra_3_power_to_overcome_miserliness_and_avarice_(greed).png" coords="367,925,635,973" shape="rect">
    <area href="sri_yantra_4_power_to_overcome_the_fascination_of_the_spell_of_illusion.png" coords="912,372,985,622" shape="rect">
    <area href="sri_yantra_5_power_to_overcome_stubbornness_and_false_pride.png" coords="162,935,63,858" shape="rect">
    <area href="sri_yantra_6_power_to_overcome_jealousy.png" coords="66,67,136,131" shape="rect">
    <area href="sri_yantra_7_power_to_overcome_the_hankering_for_worldy_rewards.png" coords="858,69,929,139" shape="rect">
    <area href="sri_yantra_8_power_to_overcome_any_failing.png" coords="924,921,862,863" shape="rect">
    <area href="sri_yantra_circle_past.png" coords="851,499,843,565,827,632,795,688,753,744,693,795,629,824,567,843,502,851,431,844,367,826,303,791,248,745,206,691,175,631,156,567,148,509,131,505,141,569,159,637,193,698,239,754,296,802,364,840,426,858,502,867,570,859,635,841,700,806,765,755,809,699,840,640,860,573,867,500" shape="poly">
    <area href="sri_yantra_circle_past.png" coords="150,504,152,438,172,372,203,307,254,249,307,202,368,174,438,152,499,148,570,155,636,174,699,208,750,251,794,303,826,369,845,438,853,496,866,495,860,436,843,364,806,296,762,241,708,191,641,158,574,137,499,128,434,131,362,154,299,180,243,227,189,292,155,361,137,430,129,497" shape="poly">
    <area href="sri_yantra_circle_present.png" coords="163,502,168,432,190,365,228,305,263,261,320,218,372,190,440,169,500,163,568,170,626,186,688,217,739,258,779,307,812,369,833,432,838,497,854,498,844,428,826,364,792,300,749,247,695,206,629,172,571,154,500,147,435,154,367,173,311,204,252,249,213,297,177,362,156,428,147,501" shape="poly">
    <area href="sri_yantra_circle_present.png" coords="161,502,170,566,188,628,219,686,264,739,320,783,372,812,437,832,502,837,564,829,627,810,690,778,739,736,783,685,814,627,832,563,837,501,851,501,848,561,828,631,798,690,752,747,700,787,631,823,568,845,500,852,432,844,365,825,307,793,252,753,206,693,173,632,156,565,147,502" shape="poly">
    <area href="sri_yantra_circle_future.png" coords="178,499,184,435,199,374,234,316,272,269,323,227,378,199,441,181,502,176,567,184,623,201,681,232,729,274,767,321,796,378,815,438,821,497,839,499,833,438,815,372,783,311,739,261,691,222,630,187,569,166,505,157,439,163,376,183,319,211,262,257,224,306,188,368,169,426,162,496" shape="poly">
    <area href="sri_yantra_circle_future.png" coords="177,498,183,563,202,622,231,681,271,727,325,770,377,798,442,819,500,820,564,817,625,798,684,770,726,728,766,680,797,621,815,562,820,500,839,498,833,565,814,624,781,685,740,735,692,776,632,809,566,829,503,837,440,831,372,812,315,782,261,737,220,689,184,628,168,567,159,496" shape="poly">
    <area href="sri_yantra_po_body.png" coords="274,652,350,724,325,744,274,727,254,676" shape="poly">
    <area href="sri_yantra_po_courage.png" coords="377,200,426,202,447,232,350,274,342,242" shape="poly">
    <area href="sri_yantra_po_desire.png" coords="446,766,449,800,501,820,551,799,553,768" shape="poly">
    <area href="sri_yantra_po_ego.png" coords="652,727,726,650,748,671,727,725,672,747" shape="poly">
    <area href="sri_yantra_po_form.png" coords="725,350,759,340,800,376,798,423,766,447" shape="poly">
    <area href="sri_yantra_po_immortality.png" coords="350,725,449,764,429,796,377,800,337,756" shape="poly">
    <area href="sri_yantra_po_intellect.png" coords="555,766,651,726,662,756,623,796,571,796" shape="poly">
    <area href="sri_yantra_po_memory.png" coords="349,274,276,349,254,323,270,270,324,251" shape="poly">
    <area href="sri_yantra_po_mind.png" coords="448,232,554,235,547,197,500,173,452,195" shape="poly">
    <area href="sri_yantra_po_names.png" coords="275,350,236,446,204,431,202,375,242,340" shape="poly">
    <area href="sri_yantra_po_origin.png" coords="234,449,235,553,197,547,177,499,199,449" shape="poly">
    <area href="sri_yantra_po_sight.png" coords="767,447,767,550,801,549,820,500,801,450" shape="poly">
    <area href="sri_yantra_po_smell.png" coords="554,233,568,201,623,201,659,238,649,273" shape="poly">
    <area href="sri_yantra_po_soul.png" coords="202,622,202,569,235,554,276,650,238,658" shape="poly">
    <area href="sri_yantra_po_sound.png" coords="728,648,765,551,798,568,799,624,757,660" shape="poly">
    <area href="sri_yantra_po_taste.png" coords="651,275,681,252,729,269,747,316,725,349" shape="poly">
    <area href="sri_yantra_pi_enjoyment.png" coords="315,576,357,638,424,684,397,721,312,690,282,603" shape="poly">
    <area href="sri_yantra_pi_excretion.png" coords="685,423,699,495,686,578,730,576,766,497,727,420" shape="poly">
    <area href="sri_yantra_pi_grasping.png" coords="315,423,302,497,314,574,277,586,233,498,274,416" shape="poly">
    <area href="sri_yantra_pi_impartiality.png" coords="576,685,640,640,683,576,716,604,690,691,602,720" shape="poly">
    <area href="sri_yantra_pi_motion.png" coords="424,315,501,298,577,316,574,263,500,230,423,270" shape="poly">
    <area href="sri_yantra_pi_repulsion.png" coords="422,313,391,281,310,308,282,393,316,423,362,354" shape="poly">
    <area href="sri_yantra_pi_speech.png" coords="425,686,501,701,575,684,580,726,499,767,419,726" shape="poly">
    <area href="sri_yantra_pi_attraction.png" coords="578,313,642,358,684,421,720,401,690,308,602,280" shape="poly">
    <area href="sri_yantra_c1_accomplisher_of_all_desires.png" coords="308,446,388,449,345,497" shape="poly">
    <area href="sri_yantra_c1_agitator_of_all.png" coords="463,649,538,649,500,699" shape="poly">
    <area href="sri_yantra_c1_arrestor_of_all.png" coords="584,410,634,408,614,446" shape="poly">
    <area href="sri_yantra_c1_attractor_of_all.png" coords="615,555,582,595,640,594" shape="poly">
    <area href="sri_yantra_c1_chaser_of_all.png" coords="582,598,608,648,540,646" shape="poly">
    <area href="sri_yantra_c1_controller_of_all.png" coords="500,302,547,360,453,360" shape="poly">
    <area href="sri_yantra_c1_delighter_of_all.png" coords="615,550,654,500,692,549" shape="poly">
    <area href="sri_yantra_c1_deluder_of_all.png" coords="616,448,692,448,654,497" shape="poly">
    <area href="sri_yantra_c1_destroyer_of_all_dualities.png" coords="421,598,392,648,461,649" shape="poly">
    <area href="sri_yantra_c1_intoxicator_of_all.png" coords="366,407,417,410,385,447" shape="poly">
    <area href="sri_yantra_c1_luxury.png" coords="347,500,308,549,384,549" shape="poly">
    <area href="sri_yantra_c1_mantras.png" coords="386,551,359,594,418,595" shape="poly">
    <area href="sri_yantra_c1_pleasing_to_all.png" coords="382,361,452,361,416,408" shape="poly">
    <area href="sri_yantra_c1_releaser_of_all.png" coords="548,361,617,360,582,407" shape="poly">
    <area href="sri_yantra_c2_appeaser_of_death.png" coords="417,409,471,409,446,446" shape="poly">
    <area href="sri_yantra_c2_bringer_of_beauty.png" coords="417,501,386,548,445,550" shape="poly">
    <area href="sri_yantra_c2_bringer_of_blessings.png" coords="556,449,615,447,585,499" shape="poly">
    <area href="sri_yantra_c2_doer_of_what_is_liked_by_all.png" coords="584,499,556,549,614,550" shape="poly">
    <area href="sri_yantra_c2_giver_of_all_accomplishments.png" coords="469,594,530,595,501,649" shape="poly">
    <area href="sri_yantra_c2_giver_of_all_desires.png" coords="531,409,584,409,554,446" shape="poly">
    <area href="sri_yantra_c2_giver_of_all_good_fortune.png" coords="422,595,445,550,467,594" shape="poly">
    <area href="sri_yantra_c2_giver_of_all_riches.png" coords="532,593,556,550,580,593" shape="poly">
    <area href="sri_yantra_c2_overcomer_of_obstacles.png" coords="389,449,446,447,416,497" shape="poly">
    <area href="sri_yantra_c2_remover_of_all_sufferings.png" coords="501,361,471,404,528,407" shape="poly">
    <area href="sri_yantra_c3_attaining_all_desires.png" coords="460,527,473,548,446,548" shape="poly">
    <area href="sri_yantra_c3_destruction_of_evil.png" coords="448,448,477,448,461,470" shape="poly">
    <area href="sri_yantra_c3_eradication_of_disease.png" coords="525,447,552,447,538,471" shape="poly">
    <area href="sri_yantra_c3_full_of_ecstasy.png" coords="434,474,461,474,447,500" shape="poly">
    <area href="sri_yantra_c3_knowledge.png" coords="539,476,567,475,554,499" shape="poly">
    <area href="sri_yantra_c3_sovereignty.png" coords="555,501,543,524,569,523" shape="poly">
    <area href="sri_yantra_c3_omniscient.png" coords="477,550,525,551,500,595" shape="poly">
    <area href="sri_yantra_c3_protection.png" coords="447,503,432,524,459,523" shape="poly">
    <area href="sri_yantra_c3_omnipotent.png" coords="543,524,525,549,556,550" shape="poly">
    <area href="sri_yantra_c3_unconditional_support.png" coords="501,410,479,446,523,445" shape="poly">
    <area href="sri_yantra_c4_ability_to_choose_an_action.png" coords="468,508,462,522,479,522" shape="poly">
    <area href="sri_yantra_c4_cold.png" coords="463,473,486,472,476,489" shape="poly">
    <area href="sri_yantra_c4_creation.png" coords="520,522,532,508,542,524" shape="poly">
    <area href="sri_yantra_c4_dissolution.png" coords="525,488,547,488,532,504" shape="poly">
    <area href="sri_yantra_c4_heat.png" coords="455,487,478,488,468,504" shape="poly">
    <area href="sri_yantra_c4_pain.png" coords="501,448,487,471,514,472" shape="poly">
    <area href="sri_yantra_c4_pleasure.png" coords="517,473,536,474,524,487" shape="poly">
    <area href="sri_yantra_c4_sustaining.png" coords="485,526,517,525,501,548" shape="poly">
    <area href="sri_yantra_center_arrows_bowl_noose_stick.png" coords="476,490,500,523,524,489,532,506,518,523,484,526,470,507" shape="poly">
    <area href="sri_yantra_center_arrows_bowl_noose_stick.png" coords="487,474,512,474,521,487,481,485" shape="poly">
    <area href="sri_yantra_center_giver_of_all_perfection.png" coords="504,499,479,487,523,487,502,520" shape="poly">
    <area href="sri_yantra_center_giver_of_all_perfection.png" coords="479,489,500,522,499,507,496,498" shape="poly">
    <area href="sri_yantra_center_bindu.png" coords="500,501,7" shape="circle">
</map>
<script
  src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
  integrity="sha256-3edrmyuQ0w65f8gfBsqowzjJe2iM6n0nKciPUp8y+7E="
  crossorigin="anonymous"></script>
  <!-- <script src="js/scripts.js"></script> -->

    <script>
        var config = {
            'meditating':0,
            'learning':0,
            'level':0,
            'database':[],
            'entries': []
        };

        $( document ).ready(function() {
            $("#my-map area").mouseover(function(){
                filename = getFileName(this.href);
                changeImage(filename);
                updateDescription(filename);
            }); 
            $("#my-map area").mouseout(function(){
                resetImage();
                var filename = '';
                if (config.learning == 1 && config.entries.length) {
                    filename = config.entries[0].filename;
                }
                updateDescription(filename);
            }); 
            $("#my-map area").click(function(){
                if (config.learning == 1) {
                    filename = getFileName(this.href);
                    if (config.entries.length && config.entries[0].filename == filename) {
                        updateLog(getDescription(filename));
                        config.entries.shift();
                        if (config.entries.length == 0) {
                            config.level++;
                            updateLevel();
                            resetImage();
                            if (config.level == 10) {
                                resetEverything();
                                alert("Congratulations!");
                                return false;
                            }
                            getRandomEntries();
                        }
                        updateDescription(config.entries[0].filename);
                    }
                }

                return false;
            }); 
            $("#begin_meditation").click(function(){
                hideMenu();
                showSriYantra("center");
                beginMeditation();
                return false;
            });
            $("#explore_sri_yantra").click(function(){
                config.learning = 0;
                hideMenu();
                showSriYantra("right");
                return false;
            });
            $("#learn_sri_yantra").click(function(){
                config.learning = 1;
                hideMenu();
                showSriYantra("right");
                getRandomEntries();
                updateDescription(config.entries[0].filename);
                updateLevel();
                return false;
            });
            $("#return_menu").click(function(){
                resetEverything();
                return false;
            });
            updateDatabase();
        });

        function shuffleArray(array) {
            for (var i = array.length - 1; i > 0; i--) {
                var j = Math.floor(Math.random() * (i + 1));
                var temp = array[i];
                array[i] = array[j];
                array[j] = temp;
            }
        }

        function updateDatabase() {
            for (var i = $("#my-map area").length - 1; i >= 0; i--) {
                filename = getFileName($("#my-map area")[i].href);
                level = getLevel(filename);
                if (!(level in config.database)) {
                    config.database[level] = [];
                }
                var entry = {"filename":filename, "description":getDescription(filename)};
                // skip duplicates
                var already_exists = false;
                for (var j = 0; j < config.database[level].length; j++) {
                    if (config.database[level][j].filename == filename) {
                        already_exists = true;
                    }
                }
                if (!already_exists) {
                    config.database[level][config.database[level].length] = entry;
                }
            }
        }

        function getRandomEntries() {
            if (config.level == 0) {
                config.level++;
            }
            var entries = [...config.database[config.level]];
            shuffleArray(entries);
            config.entries = [...entries];
        }

        function updateLevel() {
            var level_text = "Level: " + config.level;
            updateLog("Next " + level_text);
            $("#level").html(level_text);
        }
        function updateLog(text) {
            var log = $("#log").html();
            console.log(log);
            console.log((log != ""));
            if (log != "") {
                log+="\n<br />";
            }
            $("#log").html(log + text);
        }

        function hideMenu() {
            $("#menu").hide();   
        }

        function resetEverything() {
            config.meditating = 0;
            config.learning = 0;
            config.level = 0;
            config.entries = [];
            $("#log").html('');
            $("#level").html('');
            $("#description").html('');
            hideSriYantra();
            showMenu();
        }

        function showMenu() {
            $("#menu").show();   
        }
        function hideSriYantra() {
            $("#main_wrapper").hide();
        }
        function showSriYantra(alignment) {
            $("#wrapper tr td").css("text-align",alignment);
            $("#main_wrapper").show();
        }

        function getFileName(href) {
            filename = href.substring(href.lastIndexOf('/')+1);
            return filename;
        }

        function resetImage() {
            $("#main").attr("src","images/sri_yantra_white.png");
        }

        function changeImage(filename) {
            show_image = true;
            if (config.meditating == 1) {
                show_image = false;
            }
            if (config.learning == 1) {
                show_image = false;
                if (getLevel(filename) == config.level) {
                    show_image = true;
                }
            }
            if (show_image) {
                $("#main").attr("src","images/"+filename);
            }
        }

        function updateDescription(filename) {
            update_description = true;
            if (config.meditating == 1) {
                update_description = false;
            }
            if (config.learning == 1) {
                update_description = false;
                if (getLevel(filename) == config.level) {
                    update_description = true;
                }
            }
            if (update_description) {
                var description = '';
                if (filename != ''){
                    description = getDescription(filename);
                }
                $("div#description").html(description);
            }
        }

        function beginMeditation() {
            config.meditating = 1;
            setTimeout(
                function() {
                    config.meditating = 0;
                    changeImage('white_background.png');
                    config.meditating = 1;
                    setTimeout(
                        function() {
                            config.meditating = 0;
                            resetImage();
                        },
                        1000*60*2 // 2 minutes
                    );
                },
                1000*60*5 // 5 minutes
            );
        }

        function toTitleCase(str) {
            return str.replace(/(?:^|\s)\w/g, function(match) {
                return match.toUpperCase();
            });
        }

        function getLevel(filename) {
            level = 0;
            var section = filename.substring('sri_yantra_'.length);
            section = section.substring(0,section.indexOf("_"));
            if (section >= 0 && level <= 8) {
                level = 1;
            }
            if (section == "circle") {
                level = 2;
            }
            if (section == "po") {
                level = 3;
            }
            if (section == "pi") {
                level = 4;
            }
            if (section == "c1") {
                level = 5;
            }
            if (section == "c2") {
                level = 6;
            }
            if (section == "c3") {
                level = 7;
            }
            if (section == "c4") {
                level = 8;
            }
            if (section == "center") {
                level = 9;
            }
            return level;
        }

        function getDescription(filename) {
            var description = filename.substring('sri_yantra'.length+1);
            description = description.substring(description.indexOf("_")+1);
            description = description.substring(0, description.length-4);
            description = description.replace(/_/g, ' ');
            description = toTitleCase(description);
            description = description.replace(/ Of /g, ' of ');
            description = description.replace(/ The /g, ' the ');
            description = description.replace(/ To /g, ' to ');
            description = description.replace(/ For /g, ' for ');
            description = description.replace(/ And /g, ' and ');
            return description;
        }

    </script>

</body>
</html>